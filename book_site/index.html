<!doctype html>
<html lang="en">
  <head>
    <title>Main</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>

	<div class="wrap">
		<div class="block-abs-new">
			<div class="form-gradient">
				<div class="form-block">
					<div class="old">
						<span>18+</span>
					</div>
					<h3>ВВЕДИТЕ  ДАТУ  СВОЕГО  РОЖДЕНИЯ</h3>
					<div class="fields">
						<div>
							<input type="text" class="day focus" maxlength="2" placeholder="ДД">
						</div>
						<div>
							<input type="text" class="month" maxlength="2" placeholder="ММ">
						</div>
				
					</div>
					<div class="info">
						<p>+18 Доступ к сайту</p>
					</div>
				</div>
			</div>
		</div>
	</div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script>

		$('.focus').focus();

		$('input[type=text]').keypress(function(key) { if(key.charCode < 48 || key.charCode > 57) return false; });

		$('.day').blur(function(){

			var day = parseInt($('.day').val());

			switch(day)
			{
				case 1: $('.day').val("01");
				break;
				case 2: $('.day').val("02");
				break;
				case 3: $('.day').val("03");
				break;
				case 4: $('.day').val("04");
				break;
				case 5: $('.day').val("05");
				break;
				case 6: $('.day').val("06");
				break;
				case 7: $('.day').val("07");
				break;
				case 8: $('.day').val("08");
				break;
				case 9: $('.day').val("09");
				break;
			}

		});

		$('.month').blur(function(){

			var month = parseInt($('.month').val());

			switch(month)
			{
				case 1: $('.month').val("01");
				break;
				case 2: $('.month').val("02");
				break;
				case 3: $('.month').val("03");
				break;
				case 4: $('.month').val("04");
				break;
				case 5: $('.month').val("05");
				break;
				case 6: $('.month').val("06");
				break;
				case 7: $('.month').val("07");
				break;
				case 8: $('.month').val("08");
				break;
				case 9: $('.month').val("09");
				break;
			}

		});

		$('.day').keyup(function(){

			if($('.day').val() > 31)
			{
				$('.day').val("");
			}

			if($('.day').val().length >= 2)
			{
				$('.month').focus();
			}

		});

		$('.month').keyup(function(){

			if($('.month').val() > 12)
			{
				$('.month').val("");
			}

			if($('.month').val().length >= 2)
			{
				$('.year').focus();

			}

		});

		$('.year').keyup(function(){

			if($('.year').val() > 2019 && $('.year').val().length >= 4)
			{
				$('.year').val("");
			}

			if($('.year').val() < 1950 && $('.year').val().length >= 4)
			{
				$('.year').val("");
			}

		});

		$('input[type=text]').keyup(function(){

			if($('.day').val()!='' && $('.month').val()!='' && $('.year').val()!='' && $('.year').val().length >= 4)
			{

				var now = new Date();
				var setdate = parseInt($('.month').val())+'/'+parseInt($('.day').val())+'/'+parseInt($('.year').val());
				var date1 = new Date(setdate);
				var date2 = new Date(now.getFullYear(), now.getMonth(), now.getDate())
				var timeDiff = Math.abs(date2.getTime() - date1.getTime());
				var diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));



				if(date2 >= date1)
				{
					var user = Math.ceil(diffDays/365);

					$('h3').hide();
					$('.fields').hide();
					$('.info').hide();
					$('.form-block').css({'padding-bottom':'35px'});
					$('.form-block .old span').text(user);
					$('.form-block .old span').css({'color':'#fff'});

					//Проверка на возраст
					setTimeout(function() {

						if(user >= 18)
						{

							location.href = "https://www.google.com";//Ссылка больше 18

						}else{

							location.href = "https://www.ukr.net/";//Ссылка меньше 18

						}

					}, 1000);

				}
			}

		});


	</script>
  </body>
</html>
